# Query DSL

## Sample code:

<Detail title="View source code">

```json
{
  "comment": "Statistics of the highest scores in each industry",
  "select": ["industries@", "city", ":MAX(score) as high_score"],
  "from": "service",
  "wheres": [
    { ":created_at": "created time", ">=": "2021-01-01" },
    { ":created_at": "created time", "<=": "{'2021-12-31'}" },
    { ":updated_at": "updated time", "is": "null" },
    {
      "wheres": [
        { ":type": "type", "=": 1 },
        { "or:type": "or type", "=": 2 }
      ]
    }
  ],
  "orders": "high_score desc",
  "limit": 100,
  "groups": ["industries@", "city"]
}
```

</Detail>

## introduce

Gou Query DSL (Domain Specific Language) is used to describe data query conditions and is suitable for data analysis engines based on database implementation.
The data type of the data query is `Object QueryDSL`. The query conditions are described by fields such as `select`, `wheres`, and the parser converts them into the corresponding `SQL statement`.

## DSL structure list:

| Fields    | Type                      | Description                                                                                                                                                            | Required Fields |
| --------- | ------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------- |
| select    | Array\<Field Expression\> | select field list [document](./query condition)                                                                                                                        | yes             |
| from      | String                    | query data table name or data model [document](./query condition)                                                                                                      | no              |
| wheres    | Array\<Object Where\>     | data query condition [document](./query condition)                                                                                                                     | no              |
| orders    | Array\<Object Order\>     | sort condition [document](./sort condition)                                                                                                                            | no              |
| offset    | Int                       | record start position [document](./query condition)                                                                                                                    | no              |
| limit     | Int                       | The number of read data [document](./query condition)                                                                                                                  | no              |
| page      | Int                       | Paging query current page page number [document](./query condition)                                                                                                    | No              |
| pagesize  | Int                       | Number of records read per page [document](./query condition)                                                                                                          | no              |
| data-only | Bool                      | Set to `true`, the query result is Array\<Object Record\>; default is `false`, the query result is Array\<Object Paginate\>, only when `page` or Valid for `pagesize`. | No              |
| groups    | Array\<Object Group\>     | Aggregate fields and statistics level settings. [document](./aggregate query)                                                                                          | no              |
| havings   | Array\<Object Having\>    | Aggregate query result filtering, only valid when `groups` is set. [document](./aggregate query)                                                                       | no              |
| unions    | Array\<Object QueryDSL\>  | Union query. Multiple queries combine results into one table [document](./union query)                                                                                 | no              |
| query     | Object QueryDSL           | Subquery. Describe the query logic according to QueryDSL, and generate a two-dimensional data table or value. [view subquery documentation](./subquery)                | no              |
| joins     | Array\<Object Join\>      | Table joins. **Not recommended** when connecting to tables with large data volumes. [document](./subquery)                                                             | no              |
| sql       | Object SQL                | SQL statement. **Not necessary, do not use**. [document](./subquery)                                                                                                   | no              |
| comment   | String                    | The query condition comment, which is used to help understand the query condition logic and render it in the development platform.                                     | No              |
| No        |

<Div style={{ display: "flex", justifyContent: "right" }}>

  <Link type="next" title="Basic Syntax" link="Manual/QueryDSL/Basic Syntax"></Link>
</Div>
